{"remainingRequest":"E:\\案例\\admin管理后台\\node_modules\\babel-loader\\lib\\index.js!E:\\案例\\admin管理后台\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\案例\\admin管理后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\案例\\admin管理后台\\src\\views\\log\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\案例\\admin管理后台\\src\\views\\log\\index.vue","mtime":1676374221513},{"path":"E:\\案例\\admin管理后台\\babel.config.js","mtime":1676374221456},{"path":"E:\\案例\\admin管理后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676374333431},{"path":"E:\\案例\\admin管理后台\\node_modules\\babel-loader\\lib\\index.js","mtime":1676374335168},{"path":"E:\\案例\\admin管理后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676374333431},{"path":"E:\\案例\\admin管理后台\\node_modules\\vue-loader\\lib\\index.js","mtime":1676374335765}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9QYWdpbmF0aW9uJzsKaW1wb3J0IHsgZ2V0TGlzdCB9IGZyb20gJ0AvYXBpL2xvZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uCiAgfSwKICBmaWx0ZXJzOiB7CiAgICBsZXZlbEZpbHRlcjogZnVuY3Rpb24gbGV2ZWxGaWx0ZXIobGV2ZWwpIHsKICAgICAgdmFyIGxldmVsTWFwID0gewogICAgICAgICdERUJVRyc6ICdzdWNjZXNzJywKICAgICAgICAnSU5GTyc6ICcnLAogICAgICAgICdXQVJOSU5HJzogJ3dhcm5pbmcnLAogICAgICAgICdFUlJPUic6ICdkYW5nZXInCiAgICAgIH07CiAgICAgIHJldHVybiBsZXZlbE1hcFtsZXZlbF07CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG90YWw6IDAsCiAgICAgIGxpc3Q6IFtdLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAsCiAgICAgICAgY3JlYXRlZF9hdDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogdW5kZWZpbmVkLAogICAgICAgIGxldmVsOiB1bmRlZmluZWQsCiAgICAgICAgbWV0aG9kOiB1bmRlZmluZWQsCiAgICAgICAga2V5d29yZDogdW5kZWZpbmVkCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDIwLAogICAgICAgIGNyZWF0ZWRfYXQ6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZCwKICAgICAgICBsZXZlbDogdW5kZWZpbmVkLAogICAgICAgIG1ldGhvZDogdW5kZWZpbmVkLAogICAgICAgIGtleXdvcmQ6IHVuZGVmaW5lZAogICAgICB9OwogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0TGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5pdGVtczsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AAEA;EACAA;IACAC;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;QACAV;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACAK;MAAA;MACA;MACAC;QACA;QACA;QACA;MACA;IACA;EACA;AACA","names":["components","Pagination","filters","levelFilter","data","total","list","listLoading","listQuery","page","limit","created_at","status","level","method","keyword","created","methods","search","refresh","fetchData","getList"],"sourceRoot":"src/views/log","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <el-date-picker\r\n        v-model=\"listQuery.created_at\"\r\n        size=\"small\"\r\n        type=\"datetimerange\"\r\n        range-separator=\"-\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n        class=\"filter-item\"\r\n        :editable=\"false\"\r\n      />\r\n      <el-select\r\n        v-model=\"listQuery.level\"\r\n        size=\"small\"\r\n        placeholder=\"选择日志级别\"\r\n        clearable\r\n        class=\"filter-item\"\r\n      >\r\n        <el-option label=\"DEBUG\" :value=\"'DEBUG'\" />\r\n        <el-option label=\"INFO\" :value=\"'INFO'\" />\r\n        <el-option label=\"WARNING\" :value=\"'WARNING'\" />\r\n        <el-option label=\"ERROR\" :value=\"'ERROR'\" />\r\n      </el-select>\r\n      <el-select\r\n        v-model=\"listQuery.method\"\r\n        size=\"small\"\r\n        placeholder=\"选择请求方法\"\r\n        clearable\r\n        class=\"filter-item\"\r\n      >\r\n        <el-option label=\"GET\" :value=\"'GET'\" />\r\n        <el-option label=\"POST\" :value=\"'POST'\" />\r\n        <el-option label=\"PUT\" :value=\"'PUT'\" />\r\n        <el-option label=\"PATCH\" :value=\"'PATCH'\" />\r\n        <el-option label=\"DELETE\" :value=\"'DELETE'\" />\r\n      </el-select>\r\n      <el-input\r\n        v-model=\"listQuery.keyword\"\r\n        size=\"small\"\r\n        placeholder=\"请输入关键词\"\r\n        clearable\r\n        class=\"filter-item w-200\"\r\n      />\r\n      <el-button-group class=\"filter-item\">\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-search\"\r\n          @click=\"search\"\r\n        >\r\n          搜索\r\n        </el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-refresh\"\r\n          @click=\"refresh\"\r\n        >\r\n          重置\r\n        </el-button>\r\n      </el-button-group>\r\n    </div>\r\n\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      element-loading-text=\"Loading\"\r\n      border\r\n      fit\r\n      height=\"100%\"\r\n      class=\"table-container\"\r\n      highlight-current-row\r\n    >\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"ID\"\r\n        width=\"95\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.id }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"行为描述\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.title }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"日志级别\"\r\n        width=\"120\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"scope.row.level | levelFilter\">{{ scope.row.level }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"请求方法\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.method }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"响应时间\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.time }} ms\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"IP地址\"\r\n        width=\"130\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.ip }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作人\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.author }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"操作时间\"\r\n        width=\"160\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.created_at }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total > 0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.limit\"\r\n      @pagination=\"fetchData\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '@/components/Pagination'\r\nimport { getList } from '@/api/log'\r\n\r\nexport default {\r\n  components: {\r\n    Pagination\r\n  },\r\n  filters: {\r\n    levelFilter(level) {\r\n      const levelMap = {\r\n        'DEBUG': 'success',\r\n        'INFO': '',\r\n        'WARNING': 'warning',\r\n        'ERROR': 'danger'\r\n      }\r\n      return levelMap[level]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      total: 0,\r\n      list: [],\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 20,\r\n        created_at: undefined,\r\n        status: undefined,\r\n        level: undefined,\r\n        method: undefined,\r\n        keyword: undefined\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.fetchData()\r\n    },\r\n    refresh() {\r\n      this.listQuery = {\r\n        page: 1,\r\n        limit: 20,\r\n        created_at: undefined,\r\n        status: undefined,\r\n        level: undefined,\r\n        method: undefined,\r\n        keyword: undefined\r\n      }\r\n      this.fetchData()\r\n    },\r\n    fetchData() {\r\n      this.listLoading = true\r\n      getList(this.listQuery).then(response => {\r\n        this.list = response.data.items\r\n        this.total = response.data.total\r\n        this.listLoading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}